.\"
.\"  This file is part of the Code_Saturne Preprocessor, element of the
.\"  Code_Saturne CFD tool.
.\"
.\"  Copyright (C) 2009 EDF S.A., France
.\"
.\"  contact: saturne-support@edf.fr
.\"
.\"  The Code_Saturne Preprocessor is free software; you can redistribute it
.\"  and/or modify it under the terms of the GNU General Public License
.\"  as published by the Free Software Foundation; either version 2 of
.\"  the License, or (at your option) any later version.
.\"
.\"  The Code_Saturne Preprocessor is distributed in the hope that it will be
.\"  useful, but WITHOUT ANY WARRANTY; without even the implied warranty
.\"  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"  GNU General Public License for more details.
.\"
.\"  You should have received a copy of the GNU General Public License
.\"  along with the Code_Saturne Preprocessor; if not, write to the
.\"  Free Software Foundation, Inc.,
.\"  51 Franklin St, Fifth Floor,
.\"  Boston, MA  02110-1301  USA
.\"
.TH CS_PREPROCESS 1 2009-02-04 "" "Code_Saturne commands"
.SH NAME
cs_preprocess \- Code_Saturne preprocessor
.SH SYNOPSIS
.B cs_preprocess
.RI -m
.RI <file>
.RI [-sc]
.RI [options]
.br
.SH DESCRIPTION
Code_Saturne preprocessor reads meshes from several formats. It
enables non-conforming joining and periodicity handling, as well as
some postprocessing for mesh checking.
.SH OPTIONS
.B
.IP "-m, --mesh <file>"
Preprocessor input mesh file (mesh file format determined
automatically by filename extension or forced by
.B -format
sub-option)
.B
.IP "-sc, --sim-comm"
simulate messages without file output

.PP
.I General options
.B
.IP "--cwd <directory>"
working directory (if different from current directory)
.B
.IP "-h, --help"
Print a usage message and exit.
.B
.IP "-i, --in [<file>]"
Command line completed by a file (default file: standard input)
.B
.IP "--int-face [<sub-options>]"
Count and display interior faces these faces may be selected with
face-selection sub-options
.B
.IP "-j, --join [<sub-options>]"
Join non-conforming faces; select faces to join with face-selection
sub-options
.B
.IP "--log [<file>]"
Redirect terminal output to a file (default file:
.IR preprocessor.log)
.B
.IP "-p, --perio <sub-options>"
Mesh periodicity defined by argument; joining sub-options for
tolerances and selection of periodic faces with face-selection
sub-options
.B
.IP "--reorient"
If necessary, correct orientation of cells and faces
.B
.IP "--version"
Print version number

.PP
.I Postprocessing options
.B
.IP "--case <name>"
Case name (without this option, the default name is:
.IR preprocess )
.B
.IP "--cgns [<sub-options>]"
CGNS geometry output
.B
.IP "--ensight [<sub-options>]"
EnSight Gold geometry output
.B
.IP "--med [<sub-options>]"
MED 2.3 geometry output

.PP
.I Mesh selection sub-options (-m, --mesh)
.B
.IP "--format <keyword>"
Selection of mesh file format
.B
.IP "--num <n>"
Selection of mesh number in file (if the format allows it)
.B
.IP "--grp-cel <keyword>"
Add groups of cells (based on format features/conventions)
  * based on sections: keyword "section"
  * based on zones:    keyword "zone"
.B
.IP "--grp-fac <keyword>"
Add groups of faces (based on format features/conventions)
  * based on sections: keyword "section"
  * based on zones:    keyword "zone"

.PP
.I Available mesh formats (-m, --mesh; --format)

                                 Extension      Keyword

   CGNS                          .cgns          cgns     
   pro-STAR/STAR4                .ngeom         ngeom    
   EnSight (6 or Gold)           .case          ensight  
   GAMBIT Neutral                .neu           gambit   
   GMSH                          .msh           gmsh     
   NUMECA Hex                    .hex           hex      
   I-deas universal              .unv           unv      
   MED                           .med           med      
   Simail (NOPO)                 .des           des      
   Meta-mesh file                .mesh          meta     

.PP
.I Postprocessing selection sub-options (--cgns, --ensight, --med)
.B
.IP "--discard-poly"
discard polygonal faces (wth more than 4 edges) or polyhedra
.B
.IP "--simple"
force mesh output on a single part (EnSight) or section (CGNS)
.B
.IP "--text"
force text output (EnSight)
.B
.IP "--big-endian"
force binary output to big-endian (EnSight)
.B
.IP "--color-to-group"
transform colors to groups (MED)
.B
.IP "--volume"
activate output of volume mesh (by default if -boundary or -info not
given)
.B
.IP "--boundary"
activate output of boundary mesh (by default if -volume or -info not
given)
.B
.IP "--info"
activate output of information meshes (by default if -volume or
-boundary not given)

.PP
.I Periodicity sub-options (-perio, -periodic)
.B
.IP "--trans <tx ty tz>"
translation vector
.B
.IP "--rota --angle <alpha> --dir <dx dy dz> [--invpt <px py pz>]"
rotation defined by an angle (in degrees) and a direction vector, and
eventually by an invariant point (origin by default)
.B
.IP "--rota --matrix <mij> [--invpt <px py pz>]"
rotation defined by the rotation matrix (given line by line), and
eventually by an invariant point (origin by default)

.PP
.I Non-conformal face joining sub-options (-j, --join, -p, --perio)
.B
.IP "--fraction <real number>"
fraction of the length of the smallest edge under which we consider
that vertices may be fused (default value: 0.1)
.B
.IP "--plane <real number>"
minimal cosine of the normals of 2 coplanar faces (default value: 0.8)
.B
.IP "--semi-conf"
fast joining algorithm (allowed if faces already share vertices)

.PP
.I Face selection sub-options (for joining, selection, and periodicity)
.B
.IP "--color <number(s)>"
color numbers of faces to select
.B
.IP "--group <name(s)>"
group names of faces to select
.B
.IP "--invsel"
invert selection
.SH ENVIRONMENT
.IP CS_PREPROCESS_MIN_EDGE_LEN
Length under which an edge is considered degenerate (default: 1.e-15).
.IP CS_PREPROCESS_MEM_LOG
Name of memory operations trace file.
.IP CS_PREPROCESS_IGNORE_IDEAS_COO_SYS
Ignore I-deas coordinate systems.
.IP CS_PREPROCESS_JOIN_MAX_SUB_FACES
Number of new faces of an initial face above which we consider that
conformal joining face reconstruction has gone into an infinite loop
(default: 100)
.SH SEE ALSO
.BR cs_io_dump (1),
.BR cs_partition (1)
